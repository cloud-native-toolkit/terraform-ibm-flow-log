id: github.com/cloud-native-toolkit/terraform-ibm-flow-log
name: ibm-flow-logs
type: terraform
description: Module to create Flow Logs for a provided resource
tags:
  - audit
  - flow log
  - vpc
versions:
  - platforms: []
    providers:
      - name: ibm
        source: "ibm-cloud/ibm"
    dependencies:
      - id: resource_group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 2.1.0"
      - id: cos_bucket
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-object-storage-bucket
            version: ">= 0.0.1"
        optional: true
      - id: target
        refs: []
        interface: github.com/cloud-native-toolkit/automation-modules#ibm-vpc-resource
      - id: auth
        refs: []
        optional: true
    variables:
      - name: resource_group_id
        moduleRef:
          id: resource_group
          output: id
        type: string
        description: The id of the resource group where the flow logs will be provisioned
      - name: cos_bucket_name
        moduleRef:
          id: cos_bucket
          output: bucket_name
        type: string
        description: Cloud Object Storage bucket name for flow logs
      - name: target_count
        moduleRef:
          id: target
          output: count
        type: number
        description: The number of resources for which flow logs will be created
        default: 0
        optional: true
      - name: target_ids
        moduleRef:
          id: target
          output: ids
        type: list(string)
        description: The ids of the target resources for the flow log
      - name: target_names
        moduleRef:
          id: target
          output: names
        type: list(string)
        description: The names of the target resources for the flow logs
      - name: auth_id
        moduleRef:
          id: auth
          output: id
        optional: true
        type: string
        description: The id of the service authorization that allows the flow log to write to the cos bucket
        default: ""
      - name: provision
        type: bool
        description: Flag indicating that the subnet should be provisioned. If 'false' then the subnet will be looked up.
        default: true
        optional: true
    version: v1.0.1
    outputs:
      - name: count
        description: The number of flow logs created
      - name: ids
        description: The ids of the generated flow logs
      - name: names
        description: The names of the generated flow logs
  - platforms: []
    dependencies:
      - id: resource_group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 2.1.0"
      - id: cos_bucket
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-object-storage-bucket
            version: ">= 0.0.1"
        optional: true
      - id: target
        refs: []
        interface: github.com/cloud-native-toolkit/garage-terraform-modules#ibm-vpc-resource
      - id: auth
        refs: []
        optional: true
    variables:
      - name: resource_group_id
        moduleRef:
          id: resource_group
          output: id
        type: string
        description: The id of the resource group where the flow logs will be provisioned
      - name: cos_bucket_name
        moduleRef:
          id: cos_bucket
          output: bucket_name
        type: string
        description: Cloud Object Storage bucket name for flow logs
      - name: target_count
        moduleRef:
          id: target
          output: count
        type: number
        description: The number of resources for which flow logs will be created
        default: 0
        optional: true
      - name: target_ids
        moduleRef:
          id: target
          output: ids
        type: list(string)
        description: The ids of the target resources for the flow log
      - name: target_names
        moduleRef:
          id: target
          output: names
        type: list(string)
        description: The names of the target resources for the flow logs
      - name: auth_id
        moduleRef:
          id: auth
          output: id
        optional: true
        type: string
        description: The id of the service authorization that allows the flow log to write to the cos bucket
        default: ""
      - name: region
        scope: global
        type: string
        description: The IBM Cloud region where the cluster will be/has been installed.
      - name: ibmcloud_api_key
        scope: global
        type: string
        description: The IBM Cloud api token
      - name: provision
        type: bool
        description: Flag indicating that the subnet should be provisioned. If 'false' then the subnet will be looked up.
        default: true
        optional: true
    version: v1.0.0
    outputs:
      - name: count
        description: The number of flow logs created
      - name: ids
        description: The ids of the generated flow logs
      - name: names
        description: The names of the generated flow logs
  - platforms:
      - kubernetes
      - ocp3
      - ocp4
    dependencies: []
    #    - id: cluster
    #      refs:
    #        - source: github.com/ibm-garage-cloud/terraform-ibm-container-platform
    #          version: ">= 1.7.0"
    #        - source: github.com/ibm-garage-cloud/terraform-k8s-ocp-cluster
    #          version: ">= 2.0.0"
    #    - id: namespace
    #      refs:
    #        - source: github.com/ibm-garage-cloud/terraform-k8s-namespace
    #          version: ">= 2.1.0"
    #    - id: dashboard
    #      refs:
    #        - source: github.com/ibm-garage-cloud/terraform-k8s-dashboard
    #          version: ">= 1.6.0"
    variables: []
    version: v0.0.0
